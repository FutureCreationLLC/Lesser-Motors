<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LESSE Motors - Admin Dashboard</title>
<link rel="stylesheet" href="../css/style.css">
<link rel="icon" type="image/png" href="../assets/logo-le.svg">
</head>
<body>

<nav>
  <a href="../index.html">Home</a>
  <a href="../models.html">Models</a>
  <a href="../gallery.html">Gallery</a>
</nav>

<div class="page-wrapper" style="padding-top:90px; max-width:600px; margin:auto; text-align:center;">

  <h1 style="color:#ffcc00;margin-bottom:20px;">Admin Dashboard</h1>

  <form id="uploadForm" style="display:flex;flex-direction:column;gap:15px;background:#222;padding:20px;border-radius:10px;border:1px solid #333;">
    <select id="carType" required style="padding:10px;border-radius:5px;border:none;">
      <option value="">Select Car Type</option>
      <option value="pragya">Pragya</option>
      <option value="sedan">Sedan</option>
      <option value="bus">Bus</option>
      <option value="suv">SUV</option>
      <option value="pickup">Pickup</option>
      <option value="van">Van</option>
      <option value="cargo">Cargo</option>
      <option value="mini-truck">Mini Truck</option>
      <option value="luxury">Luxury</option>
      <option value="coupe">Coupe</option>
    </select>

    <input type="file" id="carImage" accept="image/*" required>
    <button type="submit" style="padding:15px;background:#ffcc00;color:#111;font-weight:bold;border-radius:8px;border:none;cursor:pointer;">Upload Image</button>
  </form>

  <div id="uploadMessage" style="margin-top:20px;color:#ffcc00;font-weight:bold;"></div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
<script src="../js/firebase-config.js"></script>
<script>
const uploadForm = document.getElementById('uploadForm');
const carTypeSelect = document.getElementById('carType');
const carImage = document.getElementById('carImage');
const uploadMessage = document.getElementById('uploadMessage');

uploadForm.addEventListener('submit', function(e){
    e.preventDefault();
    const type = carTypeSelect.value;
    const file = carImage.files[0];

    if(!type || !file){
        uploadMessage.textContent = 'Please select car type and image.';
        return;
    }

    const fileRef = storageRef.child(`${type}/${Date.now()}_${file.name}`);
    const uploadTask = fileRef.put(file);

    uploadMessage.textContent = 'Uploading...';

    uploadTask.on('state_changed',
        snapshot => {},
        error => { uploadMessage.textContent = 'Upload failed: ' + error; },
        () => {
            uploadTask.snapshot.ref.getDownloadURL().then(url=>{
                uploadMessage.textContent = 'Upload successful!';
                carTypeSelect.value = '';
                carImage.value = '';
            });
        }
    );
});
</script>

</body>
</html>
